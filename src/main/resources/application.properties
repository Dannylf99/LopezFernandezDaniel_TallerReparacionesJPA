# ============================================
# CONFIGURACIÓN DE LA BASE DE DATOS
# ============================================
spring.application.name=TallerReparaciones

# Conexión a MySQL
spring.datasource.url=jdbc:mysql://localhost:3306/tallerreparaciones?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=root
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ============================================
# CONFIGURACIÓN DE JPA/HIBERNATE
# ============================================

# Dialecto de MySQL
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect

# Mostrar las consultas SQL en la consola (útil para debug)
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Estrategia de generación del esquema
# - none: No hace nada (usa el esquema existente)
# - update: Actualiza el esquema automáticamente (RECOMENDADO para desarrollo)
# - create: Crea el esquema desde cero (BORRA datos existentes)
# - create-drop: Crea al iniciar y borra al cerrar
# - validate: Solo valida que el esquema coincide con las entidades
spring.jpa.hibernate.ddl-auto=update

# Logging de Hibernate
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# ============================================
# CONFIGURACIÓN DEL SERVIDOR
# ============================================
server.port=8080

# Contexto de la aplicación (opcional)
# server.servlet.context-path=/taller

# ============================================
# CONFIGURACIÓN DE JACKSON (JSON)
# ============================================
# Evitar error con lazy loading en JSON
spring.jackson.serialization.fail-on-empty-beans=false

# Formato de fechas en JSON
spring.jackson.date-format=yyyy-MM-dd
spring.jackson.time-zone=Europe/Madrid

# ============================================
# CONFIGURACIÓN DE DATOS INICIALES (OPCIONAL)
# ============================================
# Si quieres ejecutar el script SQL automáticamente al iniciar:
# spring.sql.init.mode=always
# spring.sql.init.schema-locations=classpath:schema.sql
# spring.jpa.defer-datasource-initialization=true
